### 🗳️ **투표 명령어 사용법 및 관전 역할 부여**

**"냥냥~! 투표 명령어로 서버 구성원의 의견을 쉽게 수집하고, 투표 종료 후 자동으로 관전 역할을 부여하세요!"**

---

## 🛠️ **투표 명령어 개요**

**투표 명령어는 크라임씬, 게임, 의견 조사 등 다양한 상황에서 사용할 수 있는 기능입니다.**  
투표가 종료된 후, 진행자가 **"관전자 역할 부여" 버튼을 눌러야만 투표했던 유저들이 자동으로 관전 역할을 받을 수 있습니다.**

---

## 🎯 **투표 명령어 사용법**

### 1️⃣ **투표 생성**

**명령어 입력:**

```
!투표
/투표
```

**결과:**

-   서버에 등록된 **캐릭터 목록이 버튼 형태로 표시된 투표 폼**이 생성됩니다.
-   진행자는 **"투표 종료"** 버튼을 눌러 투표를 종료할 수 있습니다.

📌 **투표 폼 메시지 예시:**

```
🔎 범인이라고 생각되는 캐릭터를 선택해주세요!
진행자는 투표가 끝나면 '투표 종료'를 눌러주세요.
```

---

### 2️⃣ **투표 참여**

✅ 버튼을 클릭하여 원하는 캐릭터에 투표합니다.  
✅ 진행자는 실시간으로 **투표 현황 메시지**를 DM으로 받을 수 있습니다.

**응답 메시지 예시:**

-   **첫 투표:**
    ```
    ✅ [캐릭터 이름] 투표 완료!
    ```
-   **투표 변경:**
    ```
    ✅ 이전 투표 [기존 캐릭터] → [새 캐릭터]로 변경됨
    ```

---

### 3️⃣ **투표 종료 및 결과 확인**

**✅ 진행자가 "투표 종료" 버튼을 클릭하면:**

-   **투표 결과가 자동으로 집계됩니다.**
-   **투표 결과는 진행자에게 DM으로 전송됩니다.**
-   **투표했던 유저들에게 즉시 관전 역할이 부여되지 않으며, 진행자가 "관전자 역할 부여" 버튼을 눌러야만 부여됩니다.**

📌 **투표 결과 예시 (DM 메시지):**

```
📊 [서버 이름] 투표 결과:

**Character A** (5표)
> 투표자: User1, User2, User3, User4, User5

**Character B** (3표)
> 투표자: User6, User7, User8

투표가 동점이라면 다시 진행하세요.
아래 버튼을 누르지 않는 이상 관전 권한은 부여되지 않습니다.
```

---

### 4️⃣ **관전 역할 부여**

✅ **진행자가 DM에서 "관전자 역할 부여" 버튼을 클릭하면:**

-   **투표에 참여했던 모든 유저에게 자동으로 관전 역할이 부여됩니다.**
-   **각 유저의 닉네임 앞에 설정된 "관전" 수식어가 추가됩니다.**

📌 **닉네임 변경 예시:**

```
홍길동 → [관전] 홍길동
김철수 → [관전] 김철수
```

📌 **역할 자동 추가 예시:**

```
@Observer 역할이 자동으로 부여됩니다.
```

🚨 **⚠️ "관전자 역할 부여" 버튼을 누르지 않으면 역할이 부여되지 않습니다.**  
🚨 **⚠️ `/관전설정`을 하지 않으면 이 기능이 실행되지 않습니다.**

---

## 🎛️ **투표 기능 요약**

| 기능                 | 설명                                                          |
| -------------------- | ------------------------------------------------------------- |
| **투표 생성**        | `/투표` 명령어로 캐릭터 목록을 포함한 투표 폼을 생성          |
| **투표 참여**        | 버튼 클릭으로 원하는 캐릭터에 투표 가능                       |
| **투표 종료**        | "투표 종료" 버튼 클릭 시 진행자에게 DM으로 결과 전송          |
| **투표 결과 확인**   | 진행자는 DM을 통해 투표 결과를 확인 가능                      |
| **관전 역할 부여**   | "관전자 역할 부여" 버튼을 눌러야 자동으로 역할 부여           |
| **닉네임 자동 변경** | "관전자 역할 부여" 버튼 클릭 시 닉네임에 "[관전]" 접두사 추가 |

---

## ⚠️ **주의 사항**

1. **투표 생성 조건:**

    - **서버에 캐릭터가 등록되어 있어야 합니다.**
    - 등록된 캐릭터가 없으면 **"캐릭터를 추가하고 사용해 주세요!"** 메시지가 표시됩니다.

2. **투표 종료 후 관전 역할 자동 부여 X**

    - **"관전자 역할 부여" 버튼을 눌러야 관전 역할이 부여됩니다.**
    - **투표가 동점이라면 관전 역할을 부여하지 않고 다시 투표를 진행할 수 있습니다.**

3. **설정된 관전 역할이 없으면 기능이 작동하지 않음**
    - `/관전설정` 명령어로 반드시 **관전 역할을 설정**해야 합니다.

📌 **예제:**

```
/관전설정 수식어:[관전] 권한:@Observer
```

---

## 💡 **예제 시나리오**

**👥 크라임씬 진행 중, 관전자로 참가하고 싶은 유저가 있음**

1️⃣ 진행자가 `/관전설정` 명령어로 **관전 역할 설정**

```
/관전설정 수식어:[관전] 권한:@Observer
```

2️⃣ 참가자가 `/투표` 명령어를 사용하여 투표 진행  
3️⃣ **투표 종료 버튼을 누르면, 진행자에게 DM으로 투표 결과 전송됨**  
4️⃣ **진행자가 "관전자 역할 부여" 버튼을 클릭하면 투표했던 모든 유저에게 관전 역할이 부여됨**

-   `홍길동` → `[관전] 홍길동`
-   `@Observer` 역할 자동 추가

🚨 **⚠️ "관전자 역할 부여" 버튼을 누르지 않으면 역할이 부여되지 않습니다.**  
🚨 **⚠️ `/관전설정`을 하지 않으면 이 기능이 실행되지 않습니다.**

---

✅ **변경된 투표 명령어를 활용하여 보다 유연한 진행이 가능하도록 설정하세요!** 🕵️🔍
