# Redis 설정 파일 - Crime Cat Bot 용
# 기본 Redis 설정에 슬립타이머 Pub/Sub 기능을 위한 추가 설정

# 네트워크 설정
bind 0.0.0.0
port 6379
protected-mode no

# 메모리 설정
maxmemory 512mb
maxmemory-policy allkeys-lru

# 지속성 설정 (RDB)
save 900 1
save 300 10
save 60 10000
rdbcompression yes
rdbchecksum yes
dbfilename dump.rdb
dir /data

# AOF 설정 (선택사항)
appendonly no
appendfilename "appendonly.aof"
appendfsync everysec

# 슬립타이머 Pub/Sub를 위한 키스페이스 이벤트 설정
# E: 키스페이스 이벤트 활성화
# x: 만료 이벤트 (expired) 활성화
notify-keyspace-events Ex

# 로그 설정
loglevel notice
logfile ""

# 클라이언트 연결 설정
timeout 0
tcp-keepalive 300
tcp-backlog 511

# 보안 설정 (필요시 패스워드 설정)
# requirepass your_password_here

# 성능 튜닝
databases 16
lazyfree-lazy-eviction yes
lazyfree-lazy-expire yes
lazyfree-lazy-server-del yes

# 네트워킹 (Redis 8.0에서 모듈과 충돌 방지를 위해 주석 처리)
# tcp-nodelay yes

# 백그라운드 작업
stop-writes-on-bgsave-error yes
rdb-save-incremental-fsync yes

# 확장 모듈 (필요시)
# loadmodule /path/to/module.so

# 디버그 설정 (개발 환경용)
syslog-enabled no
syslog-ident redis
syslog-facility local0

# 클러스터 설정 (사용하지 않음)
# cluster-enabled no

# 슬로우 로그 설정
slowlog-log-slower-than 10000
slowlog-max-len 128