# Crime Cat 프로젝트 주요 기능 분석

## 1. 프로젝트 개요
Crime Cat은 Discord 봇과 웹 플랫폼을 통합한 크라임씬, 방탈출, 머더미스터리 게임 커뮤니티 플랫폼입니다.

## 2. 주요 기능 분석

### 2.1 Discord 봇 기능

#### 2.1.1 투표 시스템
- **일반 투표** (`투표.js`)
  - 캐릭터 기반 범인 투표 기능
  - 관리자 권한 필요
  - 캐릭터별 버튼 생성 (5개씩 행 구성)
  - 투표 종료 버튼 포함
  - 실시간 투표 집계

- **커스텀 투표** (`커스텀투표.js`)
  - 사용자 정의 선택지 투표 (최대 24개)
  - 시간 제한 설정 가능 (10초~3600초)
  - 실시간/비밀 투표 모드 선택
  - 중복 선택지 검증
  - 투표 결과 DM 전송
  - Redis 기반 투표 데이터 저장
  - 이모지 지원 (1️⃣~🔟, 🇦~🇳)

#### 2.1.2 버튼 자동화 시스템
- **버튼 매크로** (`버튼.js`)
  - 웹사이트에서 편집한 콘텐츠 불러오기
  - 단일/멀티 그룹 지원
  - 다양한 버튼 옵션:
    - 한번만 클릭 가능
    - 관리자만 사용
    - 클릭 횟수 표시
    - 색상 변경
    - DM 전송
    - 나만보기
    - 버튼에 사용자 이름 표시
    - 역할별 채널 전송
  - 최대 5개 버튼 × 5행 = 25개 버튼 지원

- **버튼 자동화 엔진** (`ButtonAutomationEngine.js`)
  - 26개의 액션 타입 지원:
    - 역할 관리 (추가/제거/토글)
    - 닉네임 관리 (변경/초기화)
    - 메시지 전송 (채널/DM)
    - 음성 채널 관리 (이동/연결 해제/음소거/서버 음소거)
    - 채널 권한 관리
    - 모더레이션 (타임아웃 해제)
    - 음악 제어 (재생/정지/일시정지)
    - 버튼 설정
  - 순차적 액션 실행
  - 지연 시간 설정
  - 실행 기록 관리

#### 2.1.3 음악 시스템
- **음악 재생** (`music.js`)
  - 길드별 음악 관리
  - 음악 추가/삭제/조회
  - YouTube 등 외부 소스 지원
  - v3/v4 음악 플레이어 엔진
  - 재생목록 관리
  - 볼륨 조절

#### 2.1.4 캐릭터 관리
- 캐릭터 추가/제거/조회
- 캐릭터별 역할 설정
- 심문 기능
- 캐릭터 프로필 이미지

#### 2.1.5 권한 시스템
- 권한 생성/수정/삭제
- 권한 부여/해제
- 가격 기반 권한 구매
- 사용자별 권한 확인

#### 2.1.6 게임 관리
- 게임 기록 저장/조회/삭제
- 관전 모드 설정
- 게임 시작 브로드캐스트
- 타이머 기능

#### 2.1.7 유틸리티 기능
- 계산기
- 주사위
- 청소 (메시지 삭제)
- 로그 기록
- 파일 업로드/삭제
- 비밀번호 노트
- 설문조사

### 2.2 웹 프론트엔드 기능

#### 2.2.1 메인 페이지
- 게임 광고 캐러셀
- 최신 게시글
- 봇 추가 섹션
- 공지사항

#### 2.2.2 버튼 자동화 편집기
- 시각적 버튼 편집
- 액션 설정
- 조건 설정
- 미리보기 기능

#### 2.2.3 게임 관련 페이지
- 게임 히스토리 조회
- 게임 비교
- 테마 목록/상세
- 테마 광고 관리

#### 2.2.4 커뮤니티 기능
- 게시판 (자유/질문/제작자)
- 댓글 시스템
- 좋아요 기능
- 팔로우 시스템
- SNS 피드

#### 2.2.5 사용자 기능
- Discord OAuth 로그인
- 프로필 관리
- 포인트 히스토리
- 알림 시스템
- 권한 관리

#### 2.2.6 관리자 기능
- 쿠폰 관리
- 위치 매핑
- 사용자 역할 관리
- 포인트 모니터링
- 테마 광고 관리

### 2.3 백엔드 API 기능

#### 2.3.1 버튼 자동화 API
- 그룹 CRUD
- 버튼 CRUD
- 봇 전용 API
- 실행 통계

#### 2.3.2 게임 관리 API
- 크라임씬 테마 관리
- 방탈출 테마 관리
- 게임 히스토리 관리
- 통합 히스토리 조회

#### 2.3.3 사용자 관리 API
- 인증/인가
- 권한 관리
- 포인트 시스템
- 팔로우 시스템

#### 2.3.4 커뮤니티 API
- 게시글 CRUD
- 댓글 CRUD
- 좋아요 기능
- 해시태그 관리

#### 2.3.5 광고 시스템 API
- 테마 광고 관리
- 광고 큐 시스템
- 통계 수집
- 요청 관리

## 3. 기술적 특징

### 3.1 아키텍처
- **프론트엔드**: React + TypeScript + Vite
- **백엔드**: Spring Boot + Java
- **봇**: Discord.js + Node.js
- **데이터베이스**: MariaDB + Redis
- **인프라**: Docker Compose

### 3.2 주요 기술
- **실시간 처리**: Redis 기반 캐싱
- **인증**: Discord OAuth2 + JWT
- **파일 처리**: 이미지 압축, WebP 변환
- **성능 최적화**: 
  - 하이브리드 캐싱
  - 읽기/쓰기 DB 분리
  - 배치 처리
  - 지연 로딩

### 3.3 보안
- CSRF 토큰
- JWT 블랙리스트
- 권한 기반 접근 제어
- 입력 검증 및 살균

## 4. 확장성
- 모듈식 구조로 새로운 기능 추가 용이
- 액션 타입 확장 가능
- 다국어 지원 가능
- 플러그인 시스템 구현 가능

## 5. 특별 기능
- **복면투표**: 익명 투표 지원
- **역할별 콘텐츠**: 특정 역할에게만 표시
- **자동화 워크플로우**: 복잡한 액션 체인 실행
- **실시간 통계**: 버튼 클릭 및 투표 통계
- **크로스 플랫폼**: 웹과 Discord 연동